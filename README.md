# run-dockerfile

Dockerfile を読込んで命令を実行する

## コンセプト＆目標

* docker で開発した環境を、Dockerfile を実行することによりそのまま本番環境に構築する
* 環境構築のための依存環境は最小限（RubyなどのLL言語は不要）
* サーバ側に sshd 以外何もインストールされていない環境でも実行可能にする
  * [注意] 現バージョンではリモート実行は不完全で実用レベルではありません

## 使い方

	$ run-dockerfile [-H ホスト] [ファイル...]

* ファイルを省略した場合、カレントディレクトリの Dockerfile を読込んで実行
* ディレクトリが指定された場合、ディレクトリ直下の Dockerfile を読込んで実行
* ホストが指定された場合はそのホストに ssh でログインしてリモート実行

## わかっている問題

* 複数行にまたがる命令がただしく実行されない
* リモート実行において `ENV` が実行されない
* `EXPOSE` に未対応

## 無視される命令

* FROM
* MAINTAINER
* CMD
* ENTRYPOINT
* VOLUME

## インストール

	$ go get github.com/gnue/run-dockerfile

* `$GOPATH/bin` にパスを通しておく必要がある

## TODO

* リモート実行を ssh コマンドの呼出しではなく sshライブラリでセッションを維持しながら実行するように変更する
* `EXPOSE` が指定された場合、iptables を書換える
* 実行時に特権ユーザに移行して実行できるようにする
